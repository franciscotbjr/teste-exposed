<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.hexasilith.presentation.controller.IntegratedMainController">
   <left>
      <VBox prefWidth="300.0" styleClass="sidebar">
         <children>
            <HBox styleClass="sidebar-header">
               <children>
                  <Label styleClass="sidebar-title" text="Conversas" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Button fx:id="newConversationButton" styleClass="new-conversation-btn" text="+" />
               </children>
            </HBox>
            <ListView fx:id="conversationList" VBox.vgrow="ALWAYS" />
         </children>
      </VBox>
   </left>
   <center>
      <VBox styleClass="chat-area">
         <children>
            <HBox styleClass="chat-header">
               <children>
                  <Label styleClass="chat-title" text="DeepSeek AI Chat" />
                  <Region HBox.hgrow="ALWAYS" />
                  <!-- Contador de tokens -->
                  <Label fx:id="tokenCountLabel" styleClass="token-count" text="Tokens: 0" />
                  <!-- Botão para visualizar sumarizações -->
                  <Button fx:id="viewSummarizationsButton" styleClass="view-summaries-btn" text="📋 Sumarizações" />
                  <!-- Botão de sumarização -->
                  <Button fx:id="summarizeButton" styleClass="summarize-btn" text="📝 Resumir" />
               </children>
            </HBox>
            <!-- Alerta de limite de tokens -->
            <HBox fx:id="tokenLimitAlert" styleClass="token-alert" visible="false" managed="false">
               <children>
                  <Label styleClass="alert-icon" text="⚠️" />
                  <Label fx:id="tokenAlertMessage" styleClass="alert-text" text="Conversa próxima do limite de tokens" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Button fx:id="alertSummarizeButton" styleClass="alert-summarize-btn" text="Resumir Agora" />
                  <Button fx:id="dismissAlertButton" styleClass="dismiss-alert-btn" text="✕" />
               </children>
            </HBox>
            <ScrollPane fx:id="messageArea" fitToWidth="true" VBox.vgrow="ALWAYS">
               <content>
                  <VBox fx:id="messagesContainer" spacing="5.0" styleClass="messages-container" fillWidth="true" />
               </content>
            </ScrollPane>
            <VBox styleClass="input-area">
               <children>
                  <TextArea fx:id="messageInput" prefRowCount="3" promptText="Digite sua mensagem aqui..." wrapText="true" />
                  <HBox styleClass="input-controls">
                     <children>
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="sendButton" styleClass="send-btn" text="Enviar" />
                     </children>
                  </HBox>
               </children>
            </VBox>
         </children>
      </VBox>
   </center>
</BorderPane>
